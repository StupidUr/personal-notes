---
title: 'Vim使用说明' # 左侧标题
sidemenu: true # 左侧菜单
order: 1 # 排序
---

# Vim使用说明

> Vim是一个功能强大、高度可定制的文本编辑器; 具体有多强大，我现在还没体会到（orz）。在日新月异的互联网时代中，vim 可以算是一个历史悠久的产物，从诞生到现在都没有别的编辑器能替代（感兴趣可了解一下 Emacs）。目前主流的VSCode、Intellij 全家桶和Chrome等，都支持/提供了 vim plugin。

- [Vim 从入门到精通](https://github.com/wsdjeg/vim-galore-zh_cn#%E4%BB%80%E4%B9%88%E6%98%AF-vim) : Github 8k 🌟 Vim 学习教程
- [简明 VIM 练级攻略](https://coolshell.cn/articles/5426.html)：陈皓 的 VIM 存活攻略
- [游戏：VIM 大冒险](https://vim-adventures.com/)： 通过游戏的方式学习 VIM

![一张图](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d5637f9fb994e5bb006511d8c143804~tplv-k3u1fbpfcp-watermark.image)


## 运行模式
---- 
可以分为三种状态，分别是普通模式、插入模式和命令模式，个模式功能如下：

### 普通模式

控制屏幕光标的移动，字符、字或行的删除，移动复制某区段，以其它任何模式按esc 即可进宪普通模式

| 按键 | 描述 | 助记 ｜
|------|------|------|
| i | 在当前光标字符前插入 | insert |
| a | 在当前光标字符后插入 | append |
| I | 在当前行首插入 | Insert |
| A | 在当前行尾插入 | Append |
| o | 在下方开一新行，插入 | open |
| O | 在上方开一新行，插入 | Open |
| r | 替代字符，将当前字符替代为紧跟着输入的字符 | replace |
| R | 进入替代模式，将当前及之后的字符都替代为紧跟着输入的字符串，直到按 `` 返回 Normal 模式 | Replace |
| gj | 移动到屏幕折行后的下行 |
| gk | 移动到屏幕折行后的上行 |

### 可视化模式

在普通模式下按 v 进入可视模式

| 指令｜ 说明｜
|------|------|
| v	| 字符可视化模式，文本选择是以字符为单位 |
| V	| 行可视化模式，文本选择是以行为单位 |
| ctrl-V	| 块可视化模式，可以选择一个矩形内的文本 |

下面是指定在行首添加 stupidur.com的示例

shift+v进入可视模式
: normal 表示在可视模式执行normal指令
Istupidur.com 表示在行首插入 stupidur.com

### 命令模式

命令模式是在普通模式下按 : 进客户，用于搜索、保存退出等操作。

| 命令 |	说明 |
| ---- | ---- |
| :w | 保存 |
| :w file | 另存为文件 |
| :q | 退出 |
| :q! | 放弃修改退出 |
| :wq | 保存修改并退出 |
| :e hd.ts | 打开hd.ts文件 |
| :e src/**/index.ts | 打开 src 子目录下的 index.ts，按 tab 键有文件列表提示 |

## 常用命令
----

### 移动命令

Vim 的各种移动命令主要是在标准模式下

| 按键 | 描述 |
| ---- | ---- |
| h	| 光标左移 |
| j	| 光标下移 |
| k	| 光标上移 |
| l	| 光标右移 |
| 0	| 跳到行首，可以理解为无穷大的h |
| ^	| 跳到行首开始的第一个非空白字符 |
| $	| 跳到行尾，可以理解为无穷大的l |
| gg	| 跳到首行，可以理解为无穷大的k |
| G	| 跳到末行，可以理解为无穷大的j |
| w	| 跳到下一个词首 |
| ge	| 跳到上一个词尾 |
| b	| 跳到单词开头 |
| e	| 跳到单词尾部 |
| 5k	| 向上移动5行 |
| 5j	| 向下移动5行 |
| 5w	| 向后移动5个词 |
| fx	| 向前移动到字符x上 |
| Fx	| 向后移动到字符x上 |
| tx	| 移动到字符x前 |
| Tx	| 向后移动到字符x前 |
| zz	| 当前行设为页面中心 |
| ctrl+o	| 移动到上次编辑位置，可以跨文件操作 |
| ctrl+i	| 从上次编辑位置移动到本次编辑位置，可以跨文件操作 |

### 制表符

| 按键	| 说明| 
| ----	| ----|
| :6,16>	| 6行到 16 行向右缩进| 
| :6,16<	| 6行到 16 行向左缩进| 

### 选择

| 按键	| 说明| 
| ----	| ----|
| vt]	|  选择到]，不包含]，也适用于)、}| 
| va] | 	选择到]， 包含 ]，也适用于)、}| 

### 剪切操作

| 按键	| 说明| 
| ----	| ----|
| x	| 删除当前光标所在处的字符|
| X	| 删除当前光标左边的字符|
| d$	| 删除从光标到一行末尾的整个文本|
| d0	| 删除从光标到一行开头的所有单词|
| dd	| 删除当前光标处的一整行|
| 5dd	| 删除从光标开始处的5行代码|
| dgg	| 删除从光标到文本开头|
| dG	| 删除从光标到文本结尾|
| di"	| 删除在引号之间的内容|
| dit	| 删除HTML标签内容|
| dtx	| 向后删除字符直到遇到第一个 x 字符|
| dw	| 删除到下一个单词的词首|
| dW	| 删除到右边界|
| daw	| 删除到左或边界，适合删除HTML属性|
| diw	| 删除光标所在单词|
| daw	| 删除光标所在单词，包括空格|
| dit	| 删除html标签内容|
| dat	| 删除html标签|
| D	| 删除到行尾|
| C	| 删除到行尾，进入插入模式|
| c^	| 删除到行首|
| c$	| 删除到行尾|
| ciw	| 删除单词并进行修改|
| caw	| 删除单词和空格并进行修改|

### 复制粘贴

| 按键	| 说明|
| ----	| ----|
| y	| 复制|
| p	| 贴|
| yy	| 复制一整行|
| 2yy	| 复制从当前光标所在行开始的2行|
| yit	| 复制标签内容|
| yat	| 复制完整标签|
| yG	| 复制到最后|
| y{	| 复制到段落开始|
| y}	| 复制到段落结尾|
| yiw	| 复制单词并移到词首|
| yaw	| 复制单词并移到上个单词尾部|
| yit	| 复制html标签内容|
| yat	| 复制html标签|
| yi{	| 复制{内的内容,不包含{，也适用于(、}|
| ya{	| 复制{内的内容,包含{，也适用于(、}|

### 删除修改

| 按键	| 说明 |
| ----	| ---- |
| cw	| 删除从光标处到单词结尾的文本并进入到插入模式 |
| cb	| 删除从光标处到单词开头的文本并进入到插入模式 |
| cc	| 删除一整行并进入到插入模式 |
| r	| 替换当前光标下的字符 |
| R	| 进入到替换模式 |
| ctx	| 向后修改内容到 x，也就是意味着删除光标到 x 中间内容，并进入插入模式 |
| ci"	| 改写双引号中的内容 |
| cc	| 编辑当前行 |
| c^	| 删除到行首，并进入编辑模式 |
| c$	| 删除到行尾，并进入编辑模式 |
| cw	| 删除到词结束并进入编辑 |
| ciw	| 删除整个单词并进入编辑 |
| caw	| 删除整个单词并进入编辑，包含左右空格边界 |
| d2t)	| 删除到第2个扩号 |
| shft+d	| 删除到行尾 |
| d+^	| 删除到行首 |
| d+$	| 删除到行尾 |
| c+^	| 删除到行首，并进入编辑 |
| c+$	| 删除到行尾，并进入编辑 |
| di}	| 删除花扩号内容,不包含}，也适用于)、] |
| da}	| 删除花扩号内容,包含}，也适用于)、] |
| diw	| 删除单词，不包含左右空格边界 |
| diw	| 删除单词，包含左右空格边界 |
| d2i}	| 删除2层}的内容 |
| dip	| 删除连接段落 |
| cip	| 删除连接段落,并进入编辑 |

### 注释操作

| 按键	| 说明 |
| ----	| ---- |
| gcc	| 注释 |
| gc2j	| 注释两行 |

### 环绕字符

| 按键	| 原内容	| 结果 | 
| ----	| ----	| ---- |
| 单词加引号ysiw'	| stupid.com	| 'stupid.com' | 
| 整行加引号 yss"	| stupid.com	| "stupid.com"| 
| 替换为单引号 cs"'	| "stupid"	| 'stupid.com'| 
| 整行替换 cS'"	| 'stupid'	| "stupid"| 
| 删除绰号 ds'	| 'ds'| 	ds| 

### 查找替换

| 按键	| 说明| 
| ----	| ----|
| :/string	| 正向查找| 
| :?string	| 反向查找| 
| fx	| 向后查找x字符，按 ; 继续查找| 
| Fx	| 向前查找x字符，按 ; 继续查找| 
| fa	| 向右查找 a| 
| Fa	| 向左查找a| 
| 2fa	| 向右查找第2个 a| 
| 2Fa	| 向左查找第2个a| 
| :%s/hd/stupid/g	| 全局搜索hd替换为stupid| 
| :5,12s/hd/stupid/g	| 从第5行到12行替换hd为stupid| 
| :.,+2s/hd/stupid/g	| 从当前行到后两行替换hd为stupid| 

### 快速跳转

| 按键	| 说明| 
| ----	| ----|
| gg	| 跳转到第一行| 
| G	| 跳转到最后一行| 
| 5G	| 跳到第5行| 
| :5	| 跳转到第5行（命令模式）| 
| {	| 到段首| 
| }	| 到段尾| 
| shift+*	| 向下跳转到同名单词位置| 
| shift+#	| 向上跳转到同名单词位置| 
| shift+n	| 跳转到使用 shift+* 的下一个单词| 
| ctrl+d	| 向下翻半页| 
| ctrl+u	| 向上翻半页| 
| ctrl+f	| 向下翻页| 
| ctrl+b	| 向上翻页| 
| %	| 跳转到匹配的块如 }、)、]| 

### 撤销重做

如果使用 vscode 也可以直接使用 ctrl+z 等原来的方式操作

| 按键	| 说明| 
| ----	| ----|
| u	| 撤销上一步的操作| 
| ctrl+r	| 将原来的插销重做一遍 | 


## IdeaVim

> [IdeaVim摘抄](https://www.cnblogs.com/jaycekon/p/15179103.html)

### 初阶移动
> `h, j,k,l`： 左，下，上，右 移动</br>
> 
> `0,^,$`：行首，行首字母，行尾</br>
> 
> `gg,G,50G`：文件头，文件尾，跳转到指定行</br>
> 
演示操作:
h-> j->k->l->0->^->$

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c90f5148908496ba6233e7ccdd162b6~tplv-k3u1fbpfcp-watermark.image)

### 进阶移动
> `w & W`：w右移一个单词（标点分割）, W右移一个字串（空格/换行分割）
> `b & B`：b左移一个单词（标点分割）, B右移一个字串（空格/换行分割）
> `{ & }`： 移动到段首，尾部 ， 换行符分割
> `Ctrl + u/d`：上/下翻页

演示操作：

w -> b -> W -> B

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb33556f27604e97a24248f5c8103e1c~tplv-k3u1fbpfcp-watermark.image)


实际开发中移动操作

比如，查看41行的 `initialize()` 方法的实现。

`41G` -> `2w` -> `⌘+⌥+B`

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa5a1f65421d4393a835a447e8601fb8~tplv-k3u1fbpfcp-watermark.image)

### VIM 编辑命令

- 选中命令

  - `v`：可视化模式，通过 移动命令,选中相应的内容。

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4875caf3fe0f4397ae11c41519386219~tplv-k3u1fbpfcp-watermark.image)

- 插入命令


  - `i & I`：i在光标字符前插入，I在行首插入。
  - `a & A`：a在光标字符后添加，A在行尾添加。

- 删除命令
  - `d+motion` ：删除指令

    常用操作：


    > v：选中后删除d</br>
    > dd：删除当前行，并把删除的行存到剪贴板里</br>
    > db/w：删除上/下一个单词</br>

    操作演示：

    v -> d -> dd -> db -> dw -> dd

    ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6966a8f705194b15b8e32df56385b791~tplv-k3u1fbpfcp-watermark.image)

- 修改命令
  - c [number] motion：更改类操作符的工作方式跟删除类是一致。

    常用指令：
    > cw 修改当前整个单词，删除当前单词后，编辑正确内容

    ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20d0bbd444b9455bb872e8a4cc77481b~tplv-k3u1fbpfcp-watermark.image)

  - 除了上一节所说的cw，我也可以键入c$，用来修改当前字符到行末的所有内容

- 撤销命令
  - `u` 撤销最近的一个修改动作；
  - `U` 撤销当前行上的所有修改。
  - `ctrl + R`： 重放命令- 回退撤销操作

- 复制粘贴命令
  - y [number] motion : 复制命令，常用的有 yy 复制一行，yw 复制下一个单词，y$ 复制到行尾。
  - [number] p : 粘贴复制内容 ， 可粘贴多次 5p
  ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a48c899e8d84bc2b1b2f08ff8133b92~tplv-k3u1fbpfcp-watermark.image)


### VIM 命令模式

> 在普通模式下，输入`:`即可进入

- s/executor/asyncExecutor/g ：替换当前行所有 executor 为 asyncExecutor
- :g/^\s*$/d： 删除空行以及只有空格的行
- %s/#.*//g： 删除#之后的字符

> 宏录制

- qa 把你的操作记录在寄存器 a。
- 于是 @a 会replay被录制的宏。
- @@ 是一个快捷键用来replay最新录制的宏。

示例

在一个只有一行且这一行只有“1”的文本中，键入如下命令：

- qaYp<C-a>q→
 - qa 开始录制
 - Yp 复制行.
 - <C-a> 增加1.
 - q 停止录制.

- @a → 在1下面写下 2

- @@ → 在2 正面写下3

现在做 100@@ 会创建新的100行，并把数据增加到 103.

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c3be9447cdcb4c6fa6e1f0a76a02da88~tplv-k3u1fbpfcp-watermark.image)
